name: All In One

on:
  schedule:
    - cron: 0 16 * * 1
  workflow_dispatch:
    inputs:
      trigger:
        description: Manually trigger
        required: true
        type: choice
        options:
          - build

jobs:
  alpine:
    runs-on: ubuntu-latest
    uses: ./.github/workflows/.earthly.yaml
    secrets: inherit
    with:
      build-dir: alpine
  

  aria2:
    runs-on: ubuntu-latest
    uses: ./.github/workflows/.earthly.yaml
    allow-failure: true
    needs:
      - alpine
    secrets: inherit
    with:
      build-dir: aria2
  asuswrt-merlin-build:
    runs-on: ubuntu-latest
    uses: ./.github/workflows/.earthly.yaml
    allow-failure: true
    needs:
      - aria2
    secrets: inherit
    with:
      build-dir: asuswrt-merlin-build
  bandwagonmon:
    runs-on: ubuntu-latest
    uses: ./.github/workflows/.earthly.yaml
    allow-failure: true
    needs:
      - asuswrt-merlin-build
    secrets: inherit
    with:
      build-dir: bandwagonmon
  caddy:
    runs-on: ubuntu-latest
    uses: ./.github/workflows/.earthly.yaml
    allow-failure: true
    needs:
      - bandwagonmon
    secrets: inherit
    with:
      build-dir: caddy
  clash-meta:
    runs-on: ubuntu-latest
    uses: ./.github/workflows/.earthly.yaml
    allow-failure: true
    needs:
      - caddy
    secrets: inherit
    with:
      build-dir: clash-meta
  confluence:
    runs-on: ubuntu-latest
    uses: ./.github/workflows/.earthly.yaml
    allow-failure: true
    needs:
      - clash-meta
    secrets: inherit
    with:
      build-dir: confluence
  container-cli:
    runs-on: ubuntu-latest
    uses: ./.github/workflows/.earthly.yaml
    allow-failure: true
    needs:
      - confluence
    secrets: inherit
    with:
      build-dir: container-cli
  ddns:
    runs-on: ubuntu-latest
    uses: ./.github/workflows/.earthly.yaml
    allow-failure: true
    needs:
      - container-cli
    secrets: inherit
    with:
      build-dir: ddns
  demo:
    runs-on: ubuntu-latest
    uses: ./.github/workflows/.earthly.yaml
    allow-failure: true
    needs:
      - ddns
    secrets: inherit
    with:
      build-dir: demo
  derper:
    runs-on: ubuntu-latest
    uses: ./.github/workflows/.earthly.yaml
    allow-failure: true
    needs:
      - demo
    secrets: inherit
    with:
      build-dir: derper
  dnsacme:
    runs-on: ubuntu-latest
    uses: ./.github/workflows/.earthly.yaml
    allow-failure: true
    needs:
      - derper
    secrets: inherit
    with:
      build-dir: dnsacme
  dockerhub:
    runs-on: ubuntu-latest
    uses: ./.github/workflows/.earthly.yaml
    allow-failure: true
    needs:
      - dnsacme
    secrets: inherit
    with:
      build-dir: dockerhub
  idgen:
    runs-on: ubuntu-latest
    uses: ./.github/workflows/.earthly.yaml
    allow-failure: true
    needs:
      - dockerhub
    secrets: inherit
    with:
      build-dir: idgen
  jira:
    runs-on: ubuntu-latest
    uses: ./.github/workflows/.earthly.yaml
    allow-failure: true
    needs:
      - idgen
    secrets: inherit
    with:
      build-dir: jira
  makeself:
    runs-on: ubuntu-latest
    uses: ./.github/workflows/.earthly.yaml
    allow-failure: true
    needs:
      - jira
    secrets: inherit
    with:
      build-dir: makeself
  nginx-singlepage:
    runs-on: ubuntu-latest
    uses: ./.github/workflows/.earthly.yaml
    allow-failure: true
    needs:
      - makeself
    secrets: inherit
    with:
      build-dir: nginx-singlepage
  nodebuild:
    runs-on: ubuntu-latest
    uses: ./.github/workflows/.earthly.yaml
    allow-failure: true
    needs:
      - nginx-singlepage
    secrets: inherit
    with:
      build-dir: nodebuild
  notibot:
    runs-on: ubuntu-latest
    uses: ./.github/workflows/.earthly.yaml
    allow-failure: true
    needs:
      - nodebuild
    secrets: inherit
    with:
      build-dir: notibot
  open-vm-tools:
    runs-on: ubuntu-latest
    uses: ./.github/workflows/.earthly.yaml
    allow-failure: true
    needs:
      - notibot
    secrets: inherit
    with:
      build-dir: open-vm-tools
  openjdk:
    runs-on: ubuntu-latest
    uses: ./.github/workflows/.earthly.yaml
    allow-failure: true
    needs:
      - open-vm-tools
    secrets: inherit
    with:
      build-dir: openjdk
  osarch:
    runs-on: ubuntu-latest
    uses: ./.github/workflows/.earthly.yaml
    allow-failure: true
    needs:
      - openjdk
    secrets: inherit
    with:
      build-dir: osarch
  poetbot:
    runs-on: ubuntu-latest
    uses: ./.github/workflows/.earthly.yaml
    allow-failure: true
    needs:
      - osarch
    secrets: inherit
    with:
      build-dir: poetbot
  s2h:
    runs-on: ubuntu-latest
    uses: ./.github/workflows/.earthly.yaml
    allow-failure: true
    needs:
      - poetbot
    secrets: inherit
    with:
      build-dir: s2h
  ssh:
    runs-on: ubuntu-latest
    uses: ./.github/workflows/.earthly.yaml
    allow-failure: true
    needs:
      - s2h
    secrets: inherit
    with:
      build-dir: ssh

